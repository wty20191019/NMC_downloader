

 # 国家气象中心(NMC)数据下载工具

[](https://www.python.org/)
[](https://www.microsoft.com/windows/)

一个用于自动化下载国家气象中心雷达拼图和天气图数据的Python工具，支持多线程下载和断点续传。

## 功能特点

- 🚀 **多线程下载**：支持并行下载，大幅提高下载效率
- 🔄 **断点续传**：自动跳过已存在的文件，支持中断后继续下载
- 📊 **实时进度显示**：提供详细的下载进度条和统计信息
- ⏰ **自动时间计算**：自动计算UTC时间范围，无需手动输入
- 📁 **智能文件管理**：自动创建分类目录保存下载文件

## 支持的数据类型

| 数据类型 | 时间范围 | 时间精度 | 文件格式 | 保存目录 |
|---------|---------|---------|---------|---------|
| 雷达拼图 | 当前UTC时间前25小时 | 每分钟 | PNG | `nmc_radar_downloader` |
| 天气图+红外卫星云图 | 当前UTC时间前7天 | 每小时 | JPG | `nmc_weatherchartWithRadar_downloader` |

## 安装要求

- **操作系统**: Windows 7/10/11
- **Python版本**: 3.6 或更高版本
- **依赖库**: 所有依赖均为Python标准库，无需额外安装

## 快速开始

### 1. 下载项目文件
将所有文件保存到同一目录中。

### 2. 使用批处理文件启动（推荐）
```bash
# 同时启动两个下载器
start_both.bat

# 仅启动雷达拼图下载器
start_radar_downloader.bat

# 仅启动天气图下载器
start_weatherchart_downloader.bat
```

### 3. 使用Python命令行启动
```bash
# 交互式选择下载类型
python nmc_downloader.py

# 直接指定下载类型（1=雷达，2=天气图）
python nmc_downloader.py 1
```

## 详细使用说明

### 批处理文件说明

- **start_both.bat** - 同时启动雷达和天气图下载器，各自在独立命令行窗口中运行
- **start_radar_downloader.bat** - 启动雷达拼图下载器
- **start_weatherchart_downloader.bat** - 启动天气图下载器

### 下载参数配置

如需修改下载参数，请编辑对应的Python文件：

**雷达下载配置** (`nmc_radar_downloader.py`):
```python
# 修改保存目录
save_dir = "your_custom_directory"

# 修改线程数（增加可提高下载速度，但可能增加服务器压力）
max_workers = 10
```

**天气图下载配置** (`nmc_weatherchartWithRadar_downloader.py`):
```python
# 修改保存目录
save_dir = "your_custom_directory"

# 修改时间范围（当前设置为8天前至今）
seven_days_ago_utc = current_utc_time - timedelta(days=8)
```

## 输出示例

```
开始生成URL列表，时间范围: 202509041518 到 202509031518
共生成 1500 个图片URL

开始使用 5 个线程下载 1500 个文件

SEVP_AOC_RDCP_SLDAS3_ECREF_ACHN_L88_PI_20250903151800000.PNG: 75.0% [████████████████████████░░░░░░░░░░] 3.6MB/4.8MB
总进度: 15.3% [████████████░░░░░░░░░░░░░░░░░░░] 230/1500 | 成功: 200 跳过: 30 失败: 0 | 速度: 8.2文件/秒 | ETA: 154.8秒

下载完成! 成功: 1480, 跳过: 20, 失败: 0, 总计: 1500
总耗时: 382.45秒
```

## 常见问题解答

### ❓ 下载进度卡住不动怎么办？
可能是网络问题或服务器响应慢，可以：
1. 等待几分钟看是否恢复
2. 按Ctrl+C终止后重新运行，程序会自动跳过已下载文件
3. 减少线程数（修改`max_workers`参数）

### ❓ 如何更改文件保存位置？
编辑对应的Python文件中的`save_dir`参数：
```python
# 修改为你的自定义路径
save_dir = "D:/气象数据/雷达图"
```

### ❓ 为什么有些时间段没有数据？
气象数据可能因服务器维护、数据采集问题等原因在某些时间段缺失，这是正常现象。


### ❓ 下载的文件损坏或无法打开怎么办？
可能是下载过程中网络中断导致，删除损坏的文件重新运行程序即可。

## 文件结构

```
nmc-downloader/
├── start_both.bat                                  # 同时启动两个下载器
├── start_radar_downloader.bat                      # 启动雷达下载器
├── start_weatherchart_downloader.bat               # 启动天气图下载器
├── nmc_downloader.py                               # 主控制程序
├── nmc_radar_downloader.py                         # 雷达数据下载模块
├── nmc_weatherchartWithRadar_downloader.py         # 天气图下载模块
├── nmc_radar_downloader/                           # 雷达数据保存目录（自动创建）
└── nmc_weatherchartWithRadar_downloader/           # 天气图保存目录（自动创建）
```

## 技术支持

如遇到技术问题，请检查：
1. Python是否已正确安装并添加到PATH环境变量
2. 网络连接是否正常，能否访问`image.nmc.cn`域名
3. 磁盘空间是否充足

## 免责声明

1. 本工具下载的所有气象数据版权归国家气象中心所有
2. 数据仅供参考，不得用于专业气象预报或商业用途
3. 使用本工具产生的任何直接或间接损失，开发者不承担责任
4. 请合理使用资源，避免对服务器造成过大压力

## 更新日志

- **v0.1.1** (2025-09-01)\
   [x] 初始版本发布\
   [x] 支持雷达拼图下载\
   [x] 支持天气图下载\
   [ ] 多线程下载功能\

-  **v0.1.2** (2025-09-19)\
   [x] 初始版本发布\
   [x] 支持雷达拼图下载\
   [x] 支持天气图下载\
   [x] 多线程下载功能\
   [ ] ?????????????


 

---
# 免责声明：国家气象中心(NMC)数据下载工具

## 一、数据来源与版权声明
1. 本工具下载的所有气象数据（包括雷达拼图、天气图等）均来源于**国家气象中心（NMC）** 公开提供的数据源。数据版权归国家气象中心及相关原始提供方所有，本工具仅提供技术下载服务，不拥有任何数据的版权或知识产权。
2. 本工具生成的数据访问URL基于公开格式构建，但不对数据源的稳定性、完整性、准确性或时效性作任何保证。

## 二、免责条款
1. **数据准确性免责**：由于天气预报技术限制，气象数据可能存在误差、延迟或缺失。本工具下载的数据**仅供参考**，不得作为关键决策（如防灾减灾、交通出行、商业活动等）的唯一依据。用户因依赖数据准确性导致的任何损失，本工具开发方概不负责。
2. **服务风险免责**：
   - 本工具按“现状”提供，不保证下载服务的连续性、无错误性或安全性。
   - 因不可抗力（如黑客攻击、网络中断、服务器维护、政府管制等）导致的数据下载失败或错误，本工具不承担责任。
   - 用户应自行承担下载过程中可能发生的设备损坏、数据丢失或网络安全风险。
3. **使用用途免责**：本工具**仅限个人学习、科研或非商业用途**。用户不得将数据用于非法目的（如侵犯知识产权、传播虚假信息等），否则后果自负。

## 三、用户义务
1. 用户在使用本工具前应仔细阅读本声明，一旦使用即视为同意全部条款。
2. 用户需遵守国家法律法规，不得利用本工具或下载的数据从事违法活动。
3. 用户不得对本工具进行反向工程、修改、拆分或用于商业分发。

## 四、责任限制
本工具开发方不对因使用本工具导致的任何**直接、间接或偶然损失**（包括但不限于数据错误导致的决策损失、业务中断、利润损失等）承担法律责任。

## 五、其他条款
 本声明解释权归工具开发方所有，开发方有权随时修改声明内容。

 ___
